<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <meta name="referrer" content="no-referrer">
        <title>æ„é€ ä¸ææ„ - Weiyee&#39;s Blog</title><meta name="Description" content="è®°å½•ä¸ªäººå­¦ä¹ çš„åšå®¢"><meta property="og:title" content="æ„é€ ä¸ææ„" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://swjtulwy.github.io/constructor/" /><meta property="og:image" content="https://swjtulwy.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-29T20:10:43+08:00" />
<meta property="article:modified_time" content="2022-04-29T20:10:43+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://swjtulwy.github.io/logo.png"/>

<meta name="twitter:title" content="æ„é€ ä¸ææ„"/>
<meta name="twitter:description" content=""/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="/images/blogging.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://swjtulwy.github.io/constructor/" /><link rel="prev" href="https://swjtulwy.github.io/leetcode/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "æ„é€ ä¸ææ„",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/swjtulwy.github.io\/constructor\/"
        },"image": ["https:\/\/swjtulwy.github.io\/images\/Apple-Devices-Preview.png"],"genre": "posts","keywords": "Cpp","wordcount":  3453 ,
        "url": "https:\/\/swjtulwy.github.io\/constructor\/","datePublished": "2022-04-29T20:10:43+08:00","dateModified": "2022-04-29T20:10:43+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": "https:\/\/swjtulwy.github.io\/images\/avatar.png"},"author": {
                "@type": "Person",
                "name": "Weiyee"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Weiyee&#39;s Blog"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>Weiyee&#39;s Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> ğŸ“” æ‰€æœ‰æ–‡ç«  </a><a class="menu-item" href="/tags/"> ğŸ·ï¸ æ ‡ç­¾ </a><a class="menu-item" href="/categories/"> ğŸ—‚ï¸ åˆ†ç±» </a><a class="menu-item" href="/mypage/"> ğŸ‘¨â€ğŸ’» å…³äº </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Weiyee&#39;s Blog"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>Weiyee&#39;s Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        å–æ¶ˆ
                    </a>
                </div><a class="menu-item" href="/posts/" title="">ğŸ“” æ‰€æœ‰æ–‡ç« </a><a class="menu-item" href="/tags/" title="">ğŸ·ï¸ æ ‡ç­¾</a><a class="menu-item" href="/categories/" title="">ğŸ—‚ï¸ åˆ†ç±»</a><a class="menu-item" href="/mypage/" title="">ğŸ‘¨â€ğŸ’» å…³äº</a><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">æ„é€ ä¸ææ„</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Weiyee</a></span>&nbsp;<span class="post-category">æ”¶å½•äº <a href="/categories/c/c++/"><i class="far fa-folder fa-fw"></i>C/C++</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2022-04-29">2022-04-29</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 3453 å­—&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 7 åˆ†é’Ÿ&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#æ·±æ‹·è´ä¸æµ…æ‹·è´">æ·±æ‹·è´ä¸æµ…æ‹·è´</a></li>
    <li><a href="#æ„é€ å‡½æ•°">æ„é€ å‡½æ•°</a>
      <ul>
        <li><a href="#ä¸€èˆ¬æ„é€ å‡½æ•°">ä¸€èˆ¬æ„é€ å‡½æ•°</a></li>
        <li><a href="#æ‹·è´æ„é€ å‡½æ•°">æ‹·è´æ„é€ å‡½æ•°</a></li>
        <li><a href="#ç§»åŠ¨æ„é€ å‡½æ•°">ç§»åŠ¨æ„é€ å‡½æ•°</a>
          <ul>
            <li><a href="#æœ€ä½³å®è·µ">æœ€ä½³å®è·µ</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#ææ„å‡½æ•°">ææ„å‡½æ•°</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="æ·±æ‹·è´ä¸æµ…æ‹·è´">æ·±æ‹·è´ä¸æµ…æ‹·è´</h2>
<img src="https://i0.hdslb.com/bfs/album/571b0a8c704f97aefe803b72937d0dcefe1b6383.webp" title="" alt="" data-align="center">
<p>åŸºæœ¬æ•°æ®ç±»å‹çš„ç‰¹ç‚¹ï¼šç›´æ¥å­˜å‚¨åœ¨æ ˆ(stack)ä¸­çš„æ•°æ®</p>
<p>å¼•ç”¨æ•°æ®ç±»å‹çš„ç‰¹ç‚¹ï¼šå­˜å‚¨çš„æ˜¯è¯¥å¯¹è±¡åœ¨æ ˆä¸­å¼•ç”¨ï¼ŒçœŸå®çš„æ•°æ®å­˜æ”¾åœ¨å †å†…å­˜é‡Œ</p>
<p>å¼•ç”¨æ•°æ®ç±»å‹åœ¨æ ˆä¸­å­˜å‚¨äº†æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘å †ä¸­è¯¥å®ä½“çš„èµ·å§‹åœ°å€ã€‚å½“è§£é‡Šå™¨å¯»æ‰¾å¼•ç”¨å€¼æ—¶ï¼Œä¼šé¦–å…ˆæ£€ç´¢å…¶åœ¨æ ˆä¸­çš„åœ°å€ï¼Œå–å¾—åœ°å€åä»å †ä¸­è·å¾—å®ä½“ã€‚</p>
<p>åœ¨C++ä¸­ï¼š</p>
<p>1  åœ¨æœªå®šä¹‰æ˜¾ç¤ºæ‹·è´æ„é€ å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä¼šè°ƒç”¨<strong>é»˜è®¤çš„æ‹·è´å‡½æ•°</strong>â€”â€”å³<strong>æµ…æ‹·è´</strong>ï¼Œå®ƒèƒ½å¤Ÿå®Œæˆæˆå‘˜çš„ä¸€ä¸€å¤åˆ¶ã€‚å½“æ•°æ®æˆå‘˜ä¸­<strong>æ²¡æœ‰æŒ‡é’ˆ</strong>æ—¶ï¼Œæµ…æ‹·è´æ˜¯å¯è¡Œçš„ï¼›ä½†å½“æ•°æ®æˆå‘˜ä¸­æœ‰æŒ‡é’ˆæ—¶ï¼Œå¦‚æœé‡‡ç”¨ç®€å•çš„æµ…æ‹·è´ï¼Œåˆ™ä¸¤ç±»ä¸­çš„ä¸¤ä¸ªæŒ‡é’ˆå°†æŒ‡å‘åŒä¸€ä¸ªåœ°å€ï¼Œå½“å¯¹è±¡å¿«ç»“æŸæ—¶ï¼Œä¼šè°ƒç”¨<strong>ä¸¤æ¬¡ææ„å‡½æ•°</strong>ï¼Œè€Œå¯¼è‡´<strong>æŒ‡é’ˆæ‚¬æŒ‚</strong>ç°è±¡ï¼Œæ‰€ä»¥ï¼Œæ­¤æ—¶ï¼Œ<strong>å¿…é¡»</strong>é‡‡ç”¨æ·±æ‹·è´ã€‚</p>
<p>2 æ·±æ‹·è´ä¸æµ…æ‹·è´çš„åŒºåˆ«å°±åœ¨äºæ·±æ‹·è´ä¼šåœ¨å †å†…å­˜ä¸­<strong>å¦å¤–ç”³è¯·ç©ºé—´</strong>æ¥å‚¨å­˜æ•°æ®ï¼Œä»è€Œä¹Ÿå°±è§£å†³äº†æŒ‡é’ˆæ‚¬æŒ‚çš„é—®é¢˜ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå½“æ•°æ®æˆå‘˜ä¸­æœ‰æŒ‡é’ˆæ—¶ï¼Œ<strong>å¿…é¡»è¦ç”¨æ·±æ‹·è´</strong>ã€‚</p>
<h2 id="æ„é€ å‡½æ•°">æ„é€ å‡½æ•°</h2>
<p>é¦–å…ˆæ˜ç¡®ä»¥ä¸‹ä¸€ä¸ªäº‹å®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">Person</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">();</span> <span class="c1">// è¿™æ˜¯å®šä¹‰ï¼Œä¸ä¼šè¿›å…¥èµ‹å€¼è¿ç®—ç¬¦çš„æˆå‘˜å‡½æ•°
</span><span class="c1"></span><span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">();</span> <span class="c1">// è¿™æ—¶èµ‹å€¼, ä¼šè¿›å…¥èµ‹å€¼è¿ç®—ç¬¦çš„æˆå‘˜å‡½æ•°
</span></code></pre></td></tr></table>
</div>
</div><p><strong>C++çš„æ„é€ å‡½æ•°çš„ä½œç”¨ï¼šåˆå§‹åŒ–ç±»å¯¹è±¡çš„æ•°æ®æˆå‘˜ã€‚</strong></p>
<p>å³ç±»çš„å¯¹è±¡è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œç¼–è¯‘ç³»ç»Ÿå¯¹è¯¥å¯¹è±¡<strong>åˆ†é…å†…å­˜ç©ºé—´</strong>ï¼Œå¹¶è‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°ï¼Œ<strong>å®Œæˆç±»æˆå‘˜çš„åˆå§‹åŒ–</strong>ï¼Œå¯ä»¥ç†è§£ä¸ºæ„é€ å‡½æ•°çš„ä½œç”¨å°±æ˜¯ç»™ç±»çš„å„ä¸ªéé™æ€æˆå‘˜å˜é‡ç”³è¯·å†…å­˜å¹¶èµ‹åˆå€¼ã€‚</p>
<p>å½“ç›´æ¥è°ƒç”¨ç±»çš„æ„é€ å‡½æ•°æ—¶ï¼Œå…¶ç”Ÿæˆçš„å¯¹è±¡å†…å­˜åˆ†é…åœ¨<strong>æ ˆ</strong>ä¸Šï¼Œä¾‹å¦‚ <code>A a = A(); æˆ– A();</code></p>
<p>å½“ä½¿ç”¨newè¿ç®—ç¬¦ç”ŸæˆæŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆæ—¶ï¼Œå…¶ç”Ÿæˆçš„å¯¹è±¡å†…å­˜åˆ†é…åœ¨<strong>å †</strong>ä¸Šï¼Œä¾‹å¦‚<code>A a = new A();</code></p>
<p>æ³¨æ„ï¼Œå¯¹è±¡çš„æˆå‘˜å˜é‡çš„åˆå§‹åŒ–åŠ¨ä½œå‘ç”Ÿåœ¨<strong>è¿›å…¥æ„é€ å‡½æ•°æœ¬ä½“ä¹‹å‰</strong>ï¼Œåœ¨æ„é€ å‡½æ•°å†…ï¼Œéƒ½ä¸ç®—æ˜¯è¢«åˆå§‹åŒ–ï¼Œè€Œæ˜¯è¢«èµ‹å€¼</p>
<p>å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">class</span> <span class="nc">Student</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">Student</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">name</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">score</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// åœ¨èŠ±æ‹¬å·é‡Œé¢çš„éƒ½æ˜¯èµ‹å€¼ä¸æ˜¯åˆå§‹åŒ–
</span><span class="c1"></span>        <span class="n">m_Id</span> <span class="o">=</span> <span class="n">id</span><span class="p">;</span>
        <span class="n">m_Name</span> <span class="o">=</span> <span class="n">name</span><span class="p">;</span>
        <span class="n">m_Score</span> <span class="o">=</span> <span class="n">score</span><span class="p">;</span>
    <span class="p">}</span>
<span class="k">private</span><span class="o">:</span>
    <span class="kt">int</span> <span class="n">m_Id</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">m_Name</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">m_Score</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div><p>ä¸‹é¢çš„æ–¹æ³•æ‰æ˜¯æ­£ç¡®çš„åˆå§‹åŒ–æ–¹å¼</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">class</span> <span class="nc">Student</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">Student</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">name</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">score</span><span class="p">)</span> <span class="o">:</span>
        <span class="n">m_Id</span><span class="p">(</span><span class="n">id</span><span class="p">),</span> <span class="n">m_Name</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="n">m_Score</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="k">private</span><span class="o">:</span>
    <span class="kt">int</span> <span class="n">m_Id</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">m_Name</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">m_Score</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>æ„é€ å‡½æ•°çš„ç‰¹ç‚¹ï¼šä»¥ç±»åä½œä¸ºå‡½æ•°åï¼Œæ— è¿”å›ç±»å‹ã€‚</strong></p>
<p>æˆ‘ä»¬å¸¸è¯´çš„æ„é€ å‡½æ•°å¤§è‡´åˆ†ä¸ºä¸‰ç§ï¼Œå³ä¸€èˆ¬çš„æ„é€ å‡½æ•°ã€æ‹·è´æ„é€ å‡½æ•°å’Œç§»åŠ¨æ„é€ å‡½æ•°ã€‚</p>
<h3 id="ä¸€èˆ¬æ„é€ å‡½æ•°">ä¸€èˆ¬æ„é€ å‡½æ•°</h3>
<ul>
<li>
<p>æ— å‚æ•°æ„é€ å‡½æ•°/é»˜è®¤æ„é€ å‡½æ•°</p>
<ul>
<li>
<p>å½“è°ƒç”¨æ„é€ å‡½æ•°ä¸æä¾›å‚æ•°æ—¶ï¼Œå°±ä¼šè°ƒç”¨ä¸Šè¿°æ„é€ å‡½æ•°</p>
</li>
<li>
<p>è‹¥æ²¡æœ‰å®šä¹‰ä»»ä½•æ„é€ å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„æ„é€ å‡½æ•°ï¼Œç§°ä¸º<strong>åˆæˆæ„é€ å‡½æ•°</strong></p>
</li>
</ul>
</li>
<li>
<p>å¸¦å‚æ•°çš„æ„é€ å‡½æ•°</p>
<ul>
<li>å¸¦å‚æ•°çš„æ„é€ å‡½æ•°ä¸­ï¼Œæ–°çš„æ ‡å‡†æ˜¯å¯ä»¥ç”¨ç±»ä¸­å…¶ä½™çš„æ„é€ å‡½æ•°åœ¨æœ¬æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–éƒ¨åˆ†æˆå‘˜å˜é‡ï¼Œç§°å…¶ä¸º<strong>å§”æ‰˜æ„é€ å‡½æ•°</strong></li>
</ul>
</li>
</ul>
<h3 id="æ‹·è´æ„é€ å‡½æ•°">æ‹·è´æ„é€ å‡½æ•°</h3>
<p>å½“ä¸€ä¸ªæ„é€ å‡½æ•°çš„å‚æ•°ä¸ºç±»çš„å¼•ç”¨æ—¶ï¼Œå…¶å°±æ˜¯ä¸€ä¸ªæ‹·è´æ„é€ å‡½æ•°ã€‚</p>
<p>è‹¥æˆ‘ä»¬æ²¡æœ‰ç»™ä¸€ä¸ªç±»å®šä¹‰ä¸€ä¸ªæ‹·è´æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç»™æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç§°ä¸º<strong>åˆæˆæ‹·è´æ„é€ å‡½æ•°</strong> ï¼Œé™¤éæˆ‘ä»¬åœ¨è¯¥æ‹·è´æ„é€ å‡½æ•°çš„å£°æ˜ä¸­æŒ‡å®šä¸º<code>=delete</code>ã€‚</p>
<p>åˆæˆæ‹·è´æ„é€ å‡½æ•°æ‰§è¡Œçš„æ‹·è´åŠ¨ä½œ<strong>éƒ½æ˜¯æµ…æ‹·è´</strong>ï¼Œå³åªå¯¹å½“å‰æ ˆä¸Šå†…å®¹è¿›è¡Œæ‹·è´ï¼Œä¸ä¼šå¯¹æ ˆä¸­æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹è¿›è¡Œæ‹·è´ã€‚</p>
<p>æ‹·è´æ„é€ å‡½æ•°çš„å‚æ•°å¿…é¡»ä¸ºæœ¬ç±»çš„å¼•ç”¨ï¼Œå¦åˆ™ä¼šå¼•å‘æ­»å¾ªç¯</p>
<p>è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">Person</span> <span class="n">a</span> <span class="o">=</span> <span class="n">Person</span><span class="p">();</span>
<span class="n">Person</span> <span class="n">b</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬ç›´åˆ°åœ¨å‡½æ•°ä¸­ä¼ å‚æ•°çš„è¯ï¼Œè‹¥ä¸åŠ å¼•ç”¨å°±æ˜¯å€¼ä¼ é€’ï¼Œé‚£ä¹ˆæ¯ä¸ªå®å‚éƒ½ä¼šå¤åˆ¶ä¸€ä»½ï¼Œåœ¨æ ˆä¸­ç”Ÿæˆä¸´æ—¶å¯¹è±¡ï¼Œç„¶åè¯¥ä¸´æ—¶å¯¹è±¡ä½œç”¨åŸŸåœ¨å‡½æ•°å†…éƒ¨ã€‚</p>
<p>æ„é€ å‡½æ•°åŒç†ï¼Œè‹¥å…¶å‚æ•°ä¸æ˜¯æœ¬å¯¹è±¡çš„å¼•ç”¨ï¼Œé‚£ä¹ˆå½“è°ƒç”¨è¯¥æ„é€ å‡½æ•°æ—¶ï¼Œéœ€è¦å¤åˆ¶ä¸€ä»½å®å‚ç”Ÿæˆä¸´æ—¶å¯¹è±¡ï¼Œè€Œæ­¤æ—¶å®å‚ä¹Ÿæ˜¯è¯¥ç±»çš„ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸´æ—¶å¯¹è±¡çš„æ„é€ åˆå‘½ä¸­äº†æ‹·è´æ„é€ å‡½æ•°ï¼Œç­‰äºæ˜¯å¥—å¨ƒäº†ï¼Œå½¢æˆäº†æ­»å¾ªç¯ã€‚æ‰€ä»¥æ‹·è´æ„é€ å‡½æ•°çš„å‚æ•°å¿…é¡»ä¸ºæœ¬ç±»çš„å¼•ç”¨ï¼Œå¦å¤–æœ€ä½³å®è·µæ˜¯ï¼Œå½¢å‚åŠ ä¸Š<code>cosnt</code>ä¿®é¥°ï¼Œå› ä¸ºä¸€èˆ¬ä¹Ÿä¸ä¼šç”¨äºä¿®æ”¹è¢«ç”¨äºæ„é€ çš„å¯¹è±¡ã€‚</p>
<blockquote>
<p>æœ€ä½³å®è·µï¼šå½“æœ¬ç±»ä¸åŒ…å«æŒ‡é’ˆç±»å‹çš„æˆå‘˜å˜é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åˆæˆçš„æ‹·è´æ„é€ ï¼Œå³å…¨éƒ½æ˜¯æµ…æ‹·è´ï¼Œå½“æœ¬ç±»åŒ…å«æŒ‡é’ˆç±»å‹çš„æˆå‘˜å˜é‡æ—¶ï¼Œåº”ä½¿ç”¨è‡ªå®šä¹‰çš„æ‹·è´æ„é€ å¹¶å®ç°æ·±æ‹·è´ã€‚æœ€å¥½ç»™å‚æ•°åŠ ä¸Š<code>const</code>ä¿®é¥°ç¬¦</p>
</blockquote>
<p>çœ‹å¦‚ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">Buffer</span> <span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">buf</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">capacity</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">length</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
    <span class="k">explicit</span> <span class="n">Buffer</span><span class="p">(</span><span class="kt">int</span> <span class="n">capacity</span><span class="p">)</span> <span class="o">:</span> <span class="n">capacity</span><span class="p">(</span><span class="n">capacity</span><span class="p">),</span> <span class="n">length</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">buf</span><span class="p">(</span><span class="k">new</span> <span class="kt">unsigned</span> <span class="kt">char</span><span class="p">[</span><span class="n">capacity</span><span class="p">]{</span> <span class="mi">0</span> <span class="p">})</span> <span class="p">{</span>

    <span class="p">}</span>

    <span class="kt">int</span> <span class="nf">GetLength</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">length</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="nf">GetCapacity</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">capacity</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">bool</span> <span class="nf">write</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">length</span> <span class="o">==</span> <span class="n">capacity</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="n">buf</span><span class="p">[</span><span class="n">length</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">~</span><span class="n">Buffer</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">delete</span><span class="p">[]</span> <span class="n">buf</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">friend</span> <span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">ostream</span> <span class="o">&amp;</span><span class="n">os</span><span class="p">,</span> <span class="n">Buffer</span> <span class="o">&amp;</span><span class="n">buffer</span><span class="p">);</span>
<span class="p">};</span>

<span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">ostream</span> <span class="o">&amp;</span><span class="n">os</span><span class="p">,</span> <span class="n">Buffer</span> <span class="o">&amp;</span><span class="n">buffer</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Buffer(&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">buffer</span><span class="p">.</span><span class="n">length</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;/&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">buffer</span><span class="p">.</span><span class="n">capacity</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;)[&#34;</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">buffer</span><span class="p">.</span><span class="n">capacity</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">buffer</span><span class="p">.</span><span class="n">buf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;, &#34;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;]&#34;</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">os</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">auto</span> <span class="n">buffer</span> <span class="o">=</span> <span class="n">Buffer</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="k">auto</span> <span class="n">buffer2</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">;</span>
    <span class="n">buffer</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mi">65</span><span class="p">);</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">buffer</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">buffer2</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Buffer(1/10)[65, 0, 0, 0, 0, 0, 0, 0, 0, 0, ]
Buffer(0/10)[65, 0, 0, 0, 0, 0, 0, 0, 0, 0, ]
è¿›ç¨‹å·²ç»“æŸ,é€€å‡ºä»£ç -1073740940 (0xC0000374)
</code></pre></td></tr></table>
</div>
</div><p>çœ‹åˆ°æ²¡ï¼Œç”±äºæ²¡æœ‰å®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥<code>buffer2</code>æ²¡æœ‰å†™å´å‡ºç°äº†65è¿™ä¸ªå€¼ã€‚å¦å¤–è¿›ç¨‹çªå‡ºä»£ç ä¸ºä¸€ä¸ªè´Ÿæ•°ï¼Œè¯´æ˜å‡ºç°äº†å¼‚å¸¸ï¼Œæ˜¯å› ä¸ºï¼Œè¿›è¡Œäº†ä¸¤æ¬¡ææ„ã€‚</p>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­åŠ å…¥æ·±å¤åˆ¶æ“ä½œåï¼Œå°±æœ‰äº†æ­£ç¡®çš„ç»“æœäº†ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">Buffer</span><span class="p">(</span><span class="k">const</span> <span class="n">Buffer</span><span class="o">&amp;</span> <span class="n">buffer</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">buffer</span> <span class="o">==</span> <span class="k">this</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// åˆ¤æ–­æ˜¯å¦è‡ªèµ‹å€¼ï¼Œé¿å…åç»­æ“ä½œå¼€é”€
</span><span class="c1"></span>    <span class="k">this</span><span class="o">-&gt;</span><span class="n">capacity</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">.</span><span class="n">capacity</span><span class="p">;</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">length</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">.</span><span class="n">length</span><span class="p">;</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">unsigned</span> <span class="kt">char</span><span class="p">[</span><span class="n">buffer</span><span class="p">.</span><span class="n">capacity</span><span class="p">];</span>
    <span class="n">std</span><span class="o">::</span><span class="n">copy</span><span class="p">(</span><span class="n">buffer</span><span class="p">.</span><span class="n">buf</span><span class="p">,</span> <span class="n">buffer</span><span class="p">.</span><span class="n">buf</span> <span class="o">+</span> <span class="n">buffer</span><span class="p">.</span><span class="n">capacity</span><span class="p">,</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">buf</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">Buffer<span class="o">(</span>1/10<span class="o">)[</span>65, 0, 0, 0, 0, 0, 0, 0, 0, 0, <span class="o">]</span>
Buffer<span class="o">(</span>0/10<span class="o">)[</span>0, 0, 0, 0, 0, 0, 0, 0, 0, 0, <span class="o">]</span>
è¿›ç¨‹å·²ç»“æŸ,é€€å‡ºä»£ç 0
</code></pre></td></tr></table>
</div>
</div><p>æ­¤å¤–èµ‹å€¼è¿ç®—ç¬¦é‡è½½å‡½æ•° çš„åŠŸèƒ½å’Œæ‹·è´æ„é€ å‡½æ•°ç±»ä¼¼ï¼Œ</p>
<blockquote>
<p>æœ€ä½³å®è·µï¼šå½“å®šä¹‰äº†æ‹·è´æ„é€ å‡½æ•°æ—¶ï¼Œä¹Ÿåº”ä¸€èµ·å®šä¹‰èµ‹å€¼è¿ç®—ç¬¦é‡è½½å‡½æ•°</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">Buffer</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Buffer</span><span class="o">&amp;</span> <span class="n">buffer</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">buffer</span> <span class="o">==</span> <span class="k">this</span><span class="p">)</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">capacity</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">.</span><span class="n">capacity</span><span class="p">;</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">length</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">.</span><span class="n">length</span><span class="p">;</span>
    <span class="k">delete</span><span class="p">[]</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">buf</span><span class="p">;</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">unsigned</span> <span class="kt">char</span><span class="p">[</span><span class="n">buffer</span><span class="p">.</span><span class="n">capacity</span><span class="p">];</span>
    <span class="n">std</span><span class="o">::</span><span class="n">copy</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">buf</span> <span class="o">+</span> <span class="n">buffer</span><span class="p">.</span><span class="n">capacity</span><span class="p">,</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">buf</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„çš„æ˜¯è¿™é‡Œå¼€å¤´ä¹Ÿè¦åšè‡ªèµ‹å€¼åˆ¤æ–­ï¼Œç›®çš„æ˜¯ä¸ºäº†é¿å…å¤šä½™çš„å¼€é”€</p>
<h3 id="ç§»åŠ¨æ„é€ å‡½æ•°">ç§»åŠ¨æ„é€ å‡½æ•°</h3>
<p>åœ¨æ‹·è´æ„é€ å‡½æ•°ä¸­ï¼Œè‹¥æœ‰å¦‚ä¸‹ä»£ç </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">auto</span> <span class="n">buffer</span> <span class="o">=</span> <span class="n">Buffer</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// ç¬¬ä¸€æ¬¡æ„é€ 
</span><span class="c1"></span><span class="n">buffer</span> <span class="o">=</span> <span class="n">Buffer</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span> <span class="c1">// è¿™é‡Œæ„é€ äº†ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œ å¹¶å°†ä¸´æ—¶å¯¹è±¡æ‹·è´è¿›è¡Œäº†ä¸€æ¬¡æ‹·è´
</span><span class="c1"></span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">buffer</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœä¸º</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">Constructor: Buffer<span class="o">(</span>0/10<span class="o">)[</span>0, 0, 0, 0, 0, 0, 0, 0, 0, 0, <span class="o">]</span>
Constructor: Buffer<span class="o">(</span>0/16<span class="o">)[</span>0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, <span class="o">]</span>
Copy: Buffer<span class="o">(</span>0/10<span class="o">)[</span>0, 0, 0, 0, 0, 0, 0, 0, 0, 0, <span class="o">]</span>
Destructor: Buffer<span class="o">(</span>0/16<span class="o">)[</span>0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, <span class="o">]</span>
Buffer<span class="o">(</span>0/16<span class="o">)[</span>0, 25, 151, 226, 40, 2, 0, 0, 80, 1, 151, 226, 40, 2, 0, 0, <span class="o">]</span>
Destructor: Buffer<span class="o">(</span>0/16<span class="o">)[</span>0, 25, 151, 226, 40, 2, 0, 0, 80, 1, 151, 226, 40, 2, 0, 0, <span class="o">]</span>
</code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥çœ‹åˆ°é¦–å…ˆæ„é€ äº†ä¸€ä¸ª<code>buffer</code>ï¼Œè°ƒç”¨äº†ç¬¬ä¸€æ¬¡æ„é€ å‡½æ•°ï¼Œç„¶ååœ¨èµ‹å€¼è¿ç®—ç¬¦çš„å³ä¾§ï¼Œæ„é€ äº†ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œç„¶åå°†è¿™ä¸´æ—¶å¯¹è±¡è¿›è¡Œäº†ä¸€æ¬¡æ‹·è´èµ‹å€¼ã€‚ç„¶åä¸´æ—¶å¯¹è±¡é”€æ¯ï¼Œæ¥ç€æ‰“å°<code>buffer</code>,æœ€å<code>buffer</code>é”€æ¯</p>
<p>ä¸ºäº†è§£å†³è¿™ç§ä¸å¿…è¦çš„æ‹·è´ï¼ŒC++11å¼•å…¥äº†ä¸€ä¸ªæ–°çš„æ¦‚å¿µä¹Ÿå°±æ˜¯ç§»åŠ¨è¯­ä¹‰ï¼ŒåŒæ—¶å¸¦æ¥äº†ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦</p>
<p>ç”±æ­¤ï¼Œæˆ‘ä»¬åŠ å…¥ä»¥ä¸‹ä»£ç </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">Buffer</span><span class="p">(</span><span class="n">Buffer</span><span class="o">&amp;&amp;</span> <span class="n">buffer</span><span class="p">)</span> <span class="k">noexcept</span><span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Move Constructor: &#34;</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="k">this</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="c1">// ä½ çš„å½’æˆ‘äº†
</span><span class="c1"></span>    <span class="k">this</span><span class="o">-&gt;</span><span class="n">capacity</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">.</span><span class="n">capacity</span><span class="p">;</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">length</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">.</span><span class="n">length</span><span class="p">;</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">buf</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">.</span><span class="n">buf</span><span class="p">;</span>
    <span class="c1">// ä½ çš„åˆ é™¤
</span><span class="c1"></span>    <span class="n">buffer</span><span class="p">.</span><span class="n">capacity</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">buffer</span><span class="p">.</span><span class="n">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">buffer</span><span class="p">.</span><span class="n">buf</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">Buffer</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Buffer</span><span class="o">&amp;&amp;</span> <span class="n">buffer</span><span class="p">)</span> <span class="k">noexcept</span><span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Move: &#34;</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="k">this</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">buffer</span> <span class="o">==</span> <span class="k">this</span><span class="p">)</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">capacity</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">.</span><span class="n">capacity</span><span class="p">;</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">length</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">.</span><span class="n">length</span><span class="p">;</span>
    <span class="k">delete</span><span class="p">[]</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">buf</span><span class="p">;</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">buf</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">.</span><span class="n">buf</span><span class="p">;</span>

    <span class="n">buffer</span><span class="p">.</span><span class="n">capacity</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">buffer</span><span class="p">.</span><span class="n">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">buffer</span><span class="p">.</span><span class="n">buf</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>æœ€ä½³å®è·µï¼Œä¸€è¦åŠ ä¸Šnoexceptä¿è¯ä¸å‘ç”Ÿå¼‚å¸¸ï¼ŒäºŒç§»åŠ¨èµ‹å€¼æ—¶è¦è¿›è¡Œè‡ªèµ‹å€¼åˆ¤æ–­ï¼Œä¸‰è¢«ç§»åŠ¨çš„å¯¹è±¡çš„æŒ‡é’ˆè¦èµ‹å€¼ä¸ºç©ºæŒ‡é’ˆ</p>
</blockquote>
<p>ç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°Copyæ“ä½œå˜ä¸ºäº†Moveæ“ä½œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="nl">Constructor</span><span class="p">:</span> <span class="n">Buffer</span><span class="p">(</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span><span class="p">)[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">]</span>
<span class="nl">Constructor</span><span class="p">:</span> <span class="n">Buffer</span><span class="p">(</span><span class="mi">0</span><span class="o">/</span><span class="mi">16</span><span class="p">)[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">]</span>
<span class="nl">Move</span><span class="p">:</span> <span class="n">Buffer</span><span class="p">(</span><span class="mi">0</span><span class="o">/</span><span class="mi">10</span><span class="p">)[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">]</span>
<span class="nl">Destructor</span><span class="p">:</span> <span class="n">Buffer</span><span class="p">(</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">)[]</span>
<span class="n">Buffer</span><span class="p">(</span><span class="mi">0</span><span class="o">/</span><span class="mi">16</span><span class="p">)[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">]</span>
<span class="nl">Destructor</span><span class="p">:</span> <span class="n">Buffer</span><span class="p">(</span><span class="mi">0</span><span class="o">/</span><span class="mi">16</span><span class="p">)[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><p>å½“åŠ å…¥å¦‚ä¸‹ä»£ç æˆ–è€…åœ¨è¯¸å¦‚<code>vector</code>çš„ä¸€äº›æ”¯æŒç§»åŠ¨æ“ä½œçš„æ ‡å‡†åº“å®¹å™¨ä¸­ï¼Œä¹Ÿä¼šä½¿ç”¨åˆ°ç§»åŠ¨æ„é€ å‡½æ•°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">auto</span> <span class="n">buffer1</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">buffer</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p>ç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">Move</span> <span class="nl">Constructor</span><span class="p">:</span> <span class="n">Buffer</span><span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="mi">0</span><span class="p">)[]</span>
<span class="nl">Destructor</span><span class="p">:</span> <span class="n">Buffer</span><span class="p">(</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">)[]</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="æœ€ä½³å®è·µ">æœ€ä½³å®è·µ</h4>
<p>ä¸ºäº†å‡å°‘é‡å¤ä»£ç ï¼Œå¯ä»¥åœ¨æ‹·è´æ„é€ å‡½æ•°ä¸­è°ƒç”¨æ‹·è´èµ‹å€¼å‡½æ•°ï¼Œç§»åŠ¨æ„é€ å‡½æ•°åŒç†</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="c1">// åˆå§‹åŒ–ï¼ŒæŒ‡é’ˆè¦ä¸ºç©ºï¼Œå› ä¸ºèµ‹å€¼æ“ä½œä¸­æœ‰ å…ˆdelete[] æ“ä½œã€‚
</span><span class="c1"></span><span class="n">Buffer</span><span class="p">(</span><span class="k">const</span> <span class="n">Buffer</span><span class="o">&amp;</span> <span class="n">buffer</span><span class="p">)</span> <span class="o">:</span> <span class="n">capacity</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">length</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">buf</span><span class="p">(</span><span class="k">nullptr</span><span class="p">){</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Copy Constructor: &#34;</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="k">this</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="o">*</span><span class="k">this</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// è¦å°†bufferå·¦å€¼è½¬ä¸ºå³å€¼ï¼Œè¿™é‡Œbufferå…·åï¼Œæ˜¯ä¸€ä¸ªå·¦å€¼
</span><span class="c1"></span><span class="n">Buffer</span><span class="p">(</span><span class="n">Buffer</span><span class="o">&amp;&amp;</span> <span class="n">buffer</span><span class="p">)</span> <span class="k">noexcept</span> <span class="o">:</span> <span class="n">capacity</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">length</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">buf</span><span class="p">(</span><span class="k">nullptr</span><span class="p">){</span>
    <span class="o">*</span><span class="k">this</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">buffer</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>æ›´è¿›ä¸€æ­¥ï¼Œæ‹·è´èµ‹å€¼å’Œç§»åŠ¨èµ‹å€¼è¿˜æ˜¯æœ‰äº›é‡å¤ä»£ç ï¼Œæ— éå°±æ˜¯æŠŠä¸€ä¸ªå¯¹è±¡çš„å€¼è½¬ç§»åˆ°å¦ä¸€å¯¹è±¡ï¼Œä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå‡ºç°ä¸€ä¸ªæ–°çš„ç¼–ç¨‹èŒƒå¼ï¼šCopy &amp; Swap</p>
<p>é¦–å…ˆåœ¨ç±»ä¸­å®šä¹‰ä¸€ä¸ªäº¤æ¢å‡½æ•°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">static</span> <span class="kt">void</span> <span class="nf">Swap</span><span class="p">(</span><span class="n">Buffer</span><span class="o">&amp;</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">Buffer</span><span class="o">&amp;</span> <span class="n">rhs</span><span class="p">)</span> <span class="k">noexcept</span><span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">lhs</span><span class="p">.</span><span class="n">buf</span><span class="p">,</span> <span class="n">rhs</span><span class="p">.</span><span class="n">buf</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">lhs</span><span class="p">.</span><span class="n">capacity</span><span class="p">,</span> <span class="n">rhs</span><span class="p">.</span><span class="n">capacity</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">lhs</span><span class="p">.</span><span class="n">length</span><span class="p">,</span> <span class="n">rhs</span><span class="p">.</span><span class="n">length</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>æ¥ç€æ”¹è¿›æ‹·è´æ„é€ å’Œæ‹·è´èµ‹å€¼ï¼Œå…¶ä¸­ï¼Œæ‹·è´æ„é€ åªéœ€å°†å°†å…¶ä»–çš„å€¼å¤åˆ¶ç»™è‡ªå·±çš„åˆå§‹åŒ–åˆ—è¡¨å³å¯ï¼Œè€Œæ‹·è´èµ‹å€¼åˆ™æ˜¯å°†å½¢å‚ç”±å¼•ç”¨å˜æˆå€¼ä¼ é€’ï¼Œæ‰€ä»¥ç›´æ¥å’Œä¸´æ—¶å¯¹è±¡äº¤æ¢å³å¯ï¼Œä¿è¯äº†å¼‚å¸¸å®‰å…¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="c1">// å†æ”¹è¿›ç‰ˆ
</span><span class="c1"></span><span class="n">Buffer</span><span class="p">(</span><span class="n">Buffer</span><span class="o">&amp;</span> <span class="n">buffer</span><span class="p">)</span> <span class="o">:</span> <span class="n">capacity</span><span class="p">(</span><span class="n">buffer</span><span class="p">.</span><span class="n">capacity</span><span class="p">),</span>
                        <span class="n">length</span><span class="p">(</span><span class="n">buffer</span><span class="p">.</span><span class="n">length</span><span class="p">),</span>
                        <span class="n">buf</span><span class="p">(</span><span class="n">buffer</span><span class="p">.</span><span class="n">capacity</span> <span class="o">?</span> <span class="k">new</span> <span class="kt">unsigned</span> <span class="kt">char</span><span class="p">[</span><span class="n">buffer</span><span class="p">.</span><span class="n">capacity</span><span class="p">]</span> <span class="o">:</span> <span class="k">nullptr</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Copy Constructor: &#34;</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="k">this</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// æ”¹è¿›ç‰ˆ Copy &amp; Swap, å¼‚å¸¸å®‰å…¨ï¼Œå› ä¸ºä¼ è¿›æ¥çš„æ˜¯æ‹·è´çš„ä¸´æ—¶å¯¹è±¡ï¼Œ
</span><span class="c1"></span><span class="n">Buffer</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Buffer</span> <span class="n">buffer</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Copy &amp; Swap: &#34;</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="k">this</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">Swap</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="n">buffer</span><span class="p">);</span>
    <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></td></tr></table>
</div>
</div><p>æ¥ç€æ”¹è¿›ç§»åŠ¨æ„é€ å’Œç§»åŠ¨èµ‹å€¼ï¼Œç”±äºç§»åŠ¨æ„é€ ä¼ è¿›æ¥çš„æ˜¯ä¸€ä¸ª<code>xvalue</code>,å°†äº¡å€¼ï¼Œæ‰€ä»¥å¯ä»¥æ¯«ä¸çŠ¹è±«äº¤æ¢ï¼Œè‡ªå·±å¯ä»¥åˆå§‹åŒ–ä¸º0å…ˆç„¶åè°ƒç”¨äº¤æ¢å‡½æ•°å³å¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">Buffer</span><span class="p">(</span><span class="n">Buffer</span><span class="o">&amp;&amp;</span> <span class="n">buffer</span><span class="p">)</span> <span class="k">noexcept</span> <span class="o">:</span> <span class="n">Buffer</span><span class="p">(</span><span class="n">buffer</span><span class="p">.</span><span class="n">capacity</span><span class="p">){</span>
    <span class="n">Swap</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="n">buffer</span><span class="p">);</span>
<span class="p">}</span>
<span class="err">å…¶å®è¿™æ—¶å·²ç»ä¸éœ€è¦ç§»åŠ¨èµ‹å€¼äº†ï¼Œå°†äº¡å€¼å¯ä»¥å’Œæ‹·è´èµ‹å€¼ä¸€èµ·æ“ä½œ</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="ææ„å‡½æ•°">ææ„å‡½æ•°</h2>
<p>ææ„å‡½æ•°ç”¨äºåœ¨é”€æ¯ä¸€ä¸ªå¯¹è±¡åŠ¨ä½œå®Œæˆå‰æ‰§è¡Œä¸€äº›æ“ä½œ</p>
<p><strong>å½“ä¸€ä¸ªç±»å…·æœ‰å­ç±»æ—¶ï¼Œæˆ–è€…ä¸€ä¸ªç±»æœ‰å¯èƒ½è¢«ç»§æ‰¿æ—¶ï¼Œåº”è¯¥å°†å…¶ææ„å‡½æ•°è®¾ç½®ä¸ºè™šææ„å‡½æ•°ã€‚</strong></p>
<p>è¿™æ—¶å› ä¸ºï¼Œå½“ä¸€ä¸ªç±»ä¸­æœ‰æŒ‡é’ˆæˆå‘˜æ—¶ï¼Œåœ¨å¤šæ€çš„åœºæ™¯ä¸­ï¼Œä¾‹å¦‚æœ‰ä¸€ä¸ªæŒ‡å‘çˆ¶ç±»ç±»å‹çš„æŒ‡é’ˆè¢«èµ‹å€¼äº†ä¸€ä¸ªå­ç±»å¯¹è±¡çš„åœ°å€æ—¶ï¼Œè‹¥ææ„å‡½æ•°ä¸æ˜¯è™šå‡½æ•°ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡ææ„æ—¶è°ƒç”¨çš„æ˜¯çˆ¶ç±»çš„ææ„å‡½æ•°è€Œä¸æ˜¯å­ç±»å¯¹è±¡çš„ææ„å‡½æ•°ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´å­ç±»çš„ä¸€äº›ç‰¹æœ‰æˆå‘˜å˜é‡æœªè¢«é”€æ¯ï¼Œä»è€Œé€ æˆ<strong>å†…å­˜æ³„æ¼</strong>ã€‚</p></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2022-04-29</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/constructor/index.md" target="_blank">é˜…è¯»åŸå§‹æ–‡æ¡£</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="åˆ†äº«åˆ° Twitter" data-sharer="twitter" data-url="https://swjtulwy.github.io/constructor/" data-title="æ„é€ ä¸ææ„" data-hashtags="Cpp"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="https://swjtulwy.github.io/constructor/" data-title="æ„é€ ä¸ææ„" data-ralateuid="xxxx"><i class="fab fa-weibo fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/cpp/">Cpp</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/leetcode/" class="prev" rel="prev" title="ç²¾é€‰é¢˜ç›®"><i class="fas fa-angle-left fa-fw"></i>ç²¾é€‰é¢˜ç›®</a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">ç”± <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.91.2">Hugo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Weiyee</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.8/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":30},"comment":{},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"æ²¡æœ‰æ‰¾åˆ°ç»“æœ","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
